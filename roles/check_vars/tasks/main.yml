- name: Check AWS_ACCESS_KEY is defined as an environment variable
  ansible.builtin.fail:
    msg: "AWS_ACCESS_KEY is not defined. Provide your Key with 'export AWS_ACCESS_KEY=...'"
  when: ansible_env.AWS_ACCESS_KEY is not defined

- name: Check AWS_SECRET_KEY is defined as an environment variable
  ansible.builtin.fail:
    msg: "AWS_SECRET_KEY is not defined. Provide your Secret with 'export AWS_SECRET_KEY=...'"
  when: ansible_env.AWS_SECRET_KEY is not defined

- name: Check that Linux distribution selected is supported
  assert: { that: "ec2_distro in supported_distros" }